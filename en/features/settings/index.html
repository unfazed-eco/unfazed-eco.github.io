
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../tutorial/part6/">
      
      
        <link rel="next" href="../app/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Settings - Unfazed</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unfazed" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="Unfazed" class="md-header__button md-logo" aria-label="Unfazed" data-md-component="logo">
      
  <img src="../../../images/uz-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unfazed
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Settings
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../features/settings/" hreflang="zh-Hant" class="md-select__link">
              中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/unfazed-eco/unfazed" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    unfazed
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Unfazed" class="md-nav__button md-logo" aria-label="Unfazed" data-md-component="logo">
      
  <img src="../../../images/uz-logo.png" alt="logo">

    </a>
    Unfazed
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/unfazed-eco/unfazed" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    unfazed
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1 Install & Create Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 2 Create Application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3 Models and Serializer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4 Endpoint and Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 5 Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/part6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 6 Test
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Settings
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Settings
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      系统概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="系统概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      核心特性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      核心组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      配置优势
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      快速开始
    </span>
  </a>
  
    <nav class="md-nav" aria-label="快速开始">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      高级配置示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfazedsettings" class="md-nav__link">
    <span class="md-ellipsis">
      UnfazedSettings 核心配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnfazedSettings 核心配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      完整配置示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      配置项详解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="配置项详解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      基础配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      应用和中间件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      数据库配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      缓存配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      自定义配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      应用级配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      环境相关配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../route/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lifespan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifespan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../endpoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Endpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features/staticfiles.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Staticfiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tortoise-orm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serializer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serializer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OPENAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testclient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contrib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contrib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contrib/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contrib/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contrib/session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Session
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReleaseNote
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      系统概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="系统概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      核心特性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      核心组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      配置优势
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      快速开始
    </span>
  </a>
  
    <nav class="md-nav" aria-label="快速开始">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      高级配置示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfazedsettings" class="md-nav__link">
    <span class="md-ellipsis">
      UnfazedSettings 核心配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UnfazedSettings 核心配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      完整配置示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      配置项详解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="配置项详解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      基础配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      应用和中间件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      数据库配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      缓存配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      自定义配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      应用级配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      环境相关配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="unfazed">Unfazed 配置系统</h1>
<p>Unfazed 的配置系统是一个基于 Pydantic 的类型安全配置管理系统，提供了强大的配置验证、自动补全和错误检查功能。通过 <code>settings.py</code> 文件和配置类的结合，为项目提供了清晰、可维护的配置管理方案。</p>
<h2 id="_1">系统概述</h2>
<h3 id="_2">核心特性</h3>
<ul>
<li><strong>类型安全</strong>: 基于 Pydantic 的配置验证，确保配置的类型正确性</li>
<li><strong>模块化设计</strong>: 支持应用级配置模块，便于大型项目的配置管理</li>
<li><strong>自动发现</strong>: 通过装饰器自动注册配置类</li>
<li><strong>延迟加载</strong>: 配置在首次访问时才加载和验证</li>
<li><strong>缓存机制</strong>: 配置加载后自动缓存，提高访问性能</li>
</ul>
<h3 id="_3">核心组件</h3>
<ul>
<li><strong>SettingsProxy</strong>: 配置代理类，负责配置的加载、缓存和访问</li>
<li><strong>register_settings</strong>: 装饰器，用于注册配置类</li>
<li><strong>UnfazedSettings</strong>: 框架核心配置类</li>
<li><strong>配置模块</strong>: 各种功能模块的配置类</li>
</ul>
<h3 id="_4">设计理念</h3>
<p>Unfazed 配置系统相比 Django 有以下优势：</p>
<p><strong>Django 的使用方式</strong>：</p>
<pre><code class="language-python"># settings.py
FOO = 'bar'
DATABASE_NAME = 'mydb'
CACHE_TIMEOUT = 3600

# app/views.py
from django.conf import settings

print(settings.FOO)  # 无类型提示，容易出错
print(settings.DATABASE_NAME)  # 配置散乱，难以管理
</code></pre>
<p><strong>Unfazed 的使用方式</strong>：</p>
<pre><code class="language-python"># settings.py
APP_SETTINGS = {
    'FOO': 'bar',
    'BAR': 123
}

DATABASE_SETTINGS = {
    'NAME': 'mydb',
    'HOST': 'localhost',
    'PORT': 5432
}

# app/settings.py
from pydantic import BaseModel, Field
from unfazed.conf import register_settings

@register_settings(&quot;APP_SETTINGS&quot;)
class AppSettings(BaseModel):
    FOO: str = Field(..., description=&quot;应用标识符&quot;)
    BAR: int = Field(default=100, ge=1, description=&quot;数值配置&quot;)

@register_settings(&quot;DATABASE_SETTINGS&quot;)
class DatabaseSettings(BaseModel):
    NAME: str = Field(..., description=&quot;数据库名称&quot;)
    HOST: str = Field(default=&quot;localhost&quot;, description=&quot;数据库主机&quot;)
    PORT: int = Field(default=5432, ge=1, le=65535, description=&quot;数据库端口&quot;)

# app/services.py
from unfazed.conf import settings
from .settings import AppSettings, DatabaseSettings

app_settings: AppSettings = settings[&quot;APP_SETTINGS&quot;]      # 完整类型提示
db_settings: DatabaseSettings = settings[&quot;DATABASE_SETTINGS&quot;]

print(app_settings.FOO)  # 类型安全，IDE 自动补全
print(db_settings.NAME)  # 配置分组，便于管理
</code></pre>
<h3 id="_5">配置优势</h3>
<ol>
<li><strong>类型安全</strong>: Pydantic 提供完整的类型验证和转换</li>
<li><strong>模块化</strong>: 配置按功能模块分组，便于管理和维护</li>
<li><strong>文档化</strong>: 配置项可以添加描述和验证规则</li>
<li><strong>IDE 支持</strong>: 完整的类型提示和自动补全</li>
<li><strong>运行时验证</strong>: 启动时自动验证配置的正确性</li>
</ol>
<h2 id="_6">快速开始</h2>
<h3 id="_7">基本使用</h3>
<pre><code class="language-python"># 1. 定义配置类 (myapp/settings.py)
from pydantic import BaseModel, Field
from unfazed.conf import register_settings

@register_settings(&quot;MYAPP_SETTINGS&quot;)
class MyAppSettings(BaseModel):
    app_name: str = Field(..., description=&quot;应用名称&quot;)
    debug_mode: bool = Field(default=False, description=&quot;调试模式&quot;)
    max_connections: int = Field(default=100, ge=1, le=1000, description=&quot;最大连接数&quot;)

# 2. 配置设置 (settings.py)
MYAPP_SETTINGS = {
    &quot;app_name&quot;: &quot;我的应用&quot;,
    &quot;debug_mode&quot;: True,
    &quot;max_connections&quot;: 200
}

# 3. 使用配置 (myapp/services.py)
from unfazed.conf import settings
from .settings import MyAppSettings

def get_app_config():
    config: MyAppSettings = settings[&quot;MYAPP_SETTINGS&quot;]
    print(f&quot;应用名称: {config.app_name}&quot;)
    print(f&quot;调试模式: {config.debug_mode}&quot;)
    print(f&quot;最大连接数: {config.max_connections}&quot;)
    return config
</code></pre>
<h3 id="_8">高级配置示例</h3>
<pre><code class="language-python"># advanced_settings.py
from typing import List, Dict, Any, Optional
from pydantic import BaseModel, Field, validator
from unfazed.conf import register_settings

@register_settings(&quot;API_SETTINGS&quot;)
class APISettings(BaseModel):
    base_url: str = Field(..., description=&quot;API 基础 URL&quot;)
    timeout: int = Field(default=30, ge=1, le=300, description=&quot;请求超时时间(秒)&quot;)
    retry_times: int = Field(default=3, ge=0, le=10, description=&quot;重试次数&quot;)
    headers: Dict[str, str] = Field(default_factory=dict, description=&quot;默认请求头&quot;)
    allowed_hosts: List[str] = Field(default_factory=list, description=&quot;允许的主机列表&quot;)

    @validator('base_url')
    def validate_base_url(cls, v):
        if not v.startswith(('http://', 'https://')):
            raise ValueError('base_url 必须以 http:// 或 https:// 开头')
        return v

@register_settings(&quot;FEATURE_FLAGS&quot;)
class FeatureFlags(BaseModel):
    enable_caching: bool = Field(default=True, description=&quot;启用缓存&quot;)
    enable_logging: bool = Field(default=True, description=&quot;启用日志&quot;)
    enable_metrics: bool = Field(default=False, description=&quot;启用指标收集&quot;)
    experimental_features: List[str] = Field(default_factory=list, description=&quot;实验性功能列表&quot;)

# settings.py 中的配置
API_SETTINGS = {
    &quot;base_url&quot;: &quot;https://api.example.com&quot;,
    &quot;timeout&quot;: 60,
    &quot;retry_times&quot;: 5,
    &quot;headers&quot;: {
        &quot;User-Agent&quot;: &quot;MyApp/1.0&quot;,
        &quot;Accept&quot;: &quot;application/json&quot;
    },
    &quot;allowed_hosts&quot;: [&quot;api.example.com&quot;, &quot;backup.example.com&quot;]
}

FEATURE_FLAGS = {
    &quot;enable_caching&quot;: True,
    &quot;enable_logging&quot;: True,
    &quot;enable_metrics&quot;: True,
    &quot;experimental_features&quot;: [&quot;new_algorithm&quot;, &quot;beta_ui&quot;]
}
</code></pre>
<h2 id="unfazedsettings">UnfazedSettings 核心配置</h2>
<p><code>UnfazedSettings</code> 是 Unfazed 框架的核心配置类，包含了启动和运行应用所需的所有基础配置。</p>
<h3 id="_9">完整配置示例</h3>
<pre><code class="language-python"># settings.py
UNFAZED_SETTINGS = {
    # 基础配置
    &quot;DEBUG&quot;: True,
    &quot;PROJECT_NAME&quot;: &quot;我的项目&quot;,
    &quot;VERSION&quot;: &quot;1.0.0&quot;,
    &quot;ROOT_URLCONF&quot;: &quot;entry.routes&quot;,

    # 应用和中间件
    &quot;INSTALLED_APPS&quot;: [
        &quot;unfazed.contrib.admin&quot;,
        &quot;unfazed.contrib.auth&quot;,
        &quot;unfazed.contrib.session&quot;,
        &quot;myapp1&quot;,
        &quot;myapp2&quot;,
    ],
    &quot;MIDDLEWARE&quot;: [
        &quot;unfazed.middleware.internal.common.CommonMiddleware&quot;,
        &quot;unfazed.middleware.internal.cors.CORSMiddleware&quot;,
        &quot;unfazed.middleware.internal.gzip.GZipMiddleware&quot;,
        &quot;unfazed.middleware.internal.trustedhost.TrustedHostMiddleware&quot;,
        &quot;unfazed.contrib.session.middleware.SessionMiddleware&quot;,
    ],

    # 生命周期管理
    &quot;LIFESPAN&quot;: [
        &quot;unfazed.cache.lifespan.CacheClear&quot;,
        &quot;myapp.lifespan.DatabaseSetup&quot;,
    ],

    # 数据库配置
    &quot;DATABASE&quot;: {
        &quot;CONNECTIONS&quot;: {
            &quot;default&quot;: {
                &quot;ENGINE&quot;: &quot;tortoise.backends.asyncpg&quot;,
                &quot;CREDENTIALS&quot;: {
                    &quot;host&quot;: &quot;localhost&quot;,
                    &quot;port&quot;: &quot;5432&quot;,
                    &quot;user&quot;: &quot;app&quot;,
                    &quot;password&quot;: &quot;app&quot;,
                    &quot;database&quot;: &quot;app&quot;,
                    &quot;minsize&quot;: 1,
                    &quot;maxsize&quot;: 10,
                }
            },
            &quot;cache_db&quot;: {
                &quot;ENGINE&quot;: &quot;tortoise.backends.sqlite&quot;,
                &quot;CREDENTIALS&quot;: {
                    &quot;file_path&quot;: &quot;cache.db&quot;
                }
            }
        },
        &quot;APPS&quot;: {
            &quot;models&quot;: {
                &quot;models&quot;: [&quot;myapp.models&quot;, &quot;unfazed.contrib.auth.models&quot;],
                &quot;default_connection&quot;: &quot;default&quot;,
            }
        },
        &quot;USE_TZ&quot;: True,
        &quot;TIMEZONE&quot;: &quot;Asia/Shanghai&quot;
    },

    # 缓存配置
    &quot;CACHE&quot;: {
        &quot;default&quot;: {
            &quot;BACKEND&quot;: &quot;unfazed.cache.backends.locmem.LocMemCache&quot;,
            &quot;OPTIONS&quot;: {
                &quot;MAX_ENTRIES&quot;: 1000,
                &quot;TIMEOUT&quot;: 300,
            }
        },
        &quot;redis&quot;: {
            &quot;BACKEND&quot;: &quot;unfazed.cache.backends.redis.defaultclient.DefaultBackend&quot;,
            &quot;LOCATION&quot;: &quot;redis://localhost:6379/0&quot;,
            &quot;OPTIONS&quot;: {
                &quot;max_connections&quot;: 100,
                &quot;decode_responses&quot;: True,
                &quot;retry_on_timeout&quot;: True,
                &quot;health_check_interval&quot;: 30,
            }
        }
    },

    # OpenAPI 配置
    &quot;OPENAPI&quot;: {
        &quot;info&quot;: {
            &quot;title&quot;: &quot;我的 API&quot;,
            &quot;version&quot;: &quot;1.0.0&quot;,
            &quot;description&quot;: &quot;这是一个示例 API&quot;,
            &quot;contact&quot;: {
                &quot;name&quot;: &quot;API 支持&quot;,
                &quot;email&quot;: &quot;support@example.com&quot;
            }
        },
        &quot;servers&quot;: [
            {
                &quot;url&quot;: &quot;http://localhost:8000&quot;,
                &quot;description&quot;: &quot;开发环境&quot;
            },
            {
                &quot;url&quot;: &quot;https://api.example.com&quot;,
                &quot;description&quot;: &quot;生产环境&quot;
            }
        ],
        &quot;allow_public&quot;: False,  # 生产环境关闭公开访问
    },

    # 中间件相关配置
    &quot;CORS&quot;: {
        &quot;allow_origins&quot;: [&quot;http://localhost:3000&quot;, &quot;https://example.com&quot;],
        &quot;allow_methods&quot;: [&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;],
        &quot;allow_headers&quot;: [&quot;*&quot;],
        &quot;allow_credentials&quot;: True,
        &quot;max_age&quot;: 3600,
    },

    &quot;TRUSTED_HOST&quot;: {
        &quot;allowed_hosts&quot;: [&quot;localhost&quot;, &quot;example.com&quot;, &quot;*.example.com&quot;],
        &quot;www_redirect&quot;: True,
    },

    &quot;GZIP&quot;: {
        &quot;minimum_size&quot;: 1024,
        &quot;compresslevel&quot;: 6,
    },

    # 日志配置
    &quot;LOGGING&quot;: {
        &quot;version&quot;: 1,
        &quot;disable_existing_loggers&quot;: False,
        &quot;formatters&quot;: {
            &quot;verbose&quot;: {
                &quot;format&quot;: &quot;{asctime} [{levelname}] {name}: {message}&quot;,
                &quot;style&quot;: &quot;{&quot;,
            },
            &quot;simple&quot;: {
                &quot;format&quot;: &quot;{levelname} {message}&quot;,
                &quot;style&quot;: &quot;{&quot;,
            },
        },
        &quot;handlers&quot;: {
            &quot;console&quot;: {
                &quot;class&quot;: &quot;logging.StreamHandler&quot;,
                &quot;formatter&quot;: &quot;verbose&quot;,
                &quot;level&quot;: &quot;INFO&quot;,
            },
            &quot;file&quot;: {
                &quot;class&quot;: &quot;unfazed.logging.handlers.UnfazedRotatingFileHandler&quot;,
                &quot;filename&quot;: &quot;logs/app.log&quot;,
                &quot;formatter&quot;: &quot;verbose&quot;,
                &quot;maxBytes&quot;: 10485760,  # 10MB
                &quot;backupCount&quot;: 5,
                &quot;level&quot;: &quot;DEBUG&quot;,
            },
        },
        &quot;root&quot;: {
            &quot;level&quot;: &quot;INFO&quot;,
            &quot;handlers&quot;: [&quot;console&quot;],
        },
        &quot;loggers&quot;: {
            &quot;unfazed&quot;: {
                &quot;level&quot;: &quot;DEBUG&quot;,
                &quot;handlers&quot;: [&quot;console&quot;, &quot;file&quot;],
                &quot;propagate&quot;: False,
            },
            &quot;myapp&quot;: {
                &quot;level&quot;: &quot;INFO&quot;,
                &quot;handlers&quot;: [&quot;file&quot;],
                &quot;propagate&quot;: True,
            },
        },
    },
}
</code></pre>
<h3 id="_10">配置项详解</h3>
<h4 id="_11">基础配置</h4>
<table>
<thead>
<tr>
<th>配置项</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DEBUG</code></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>调试模式，影响错误信息显示和性能</td>
</tr>
<tr>
<td><code>PROJECT_NAME</code></td>
<td><code>str</code></td>
<td><code>"Unfazed"</code></td>
<td>项目名称，用于日志标识</td>
</tr>
<tr>
<td><code>VERSION</code></td>
<td><code>str</code></td>
<td><code>"0.0.1"</code></td>
<td>项目版本号</td>
</tr>
<tr>
<td><code>ROOT_URLCONF</code></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>路由配置根模块</td>
</tr>
</tbody>
</table>
<h4 id="_12">应用和中间件</h4>
<pre><code class="language-python"># 应用配置
INSTALLED_APPS = [
    # 内置应用
    &quot;unfazed.contrib.admin&quot;,        # 管理界面
    &quot;unfazed.contrib.auth&quot;,         # 认证系统
    &quot;unfazed.contrib.session&quot;,      # 会话管理

    # 自定义应用
    &quot;myapp.users&quot;,                  # 用户模块
    &quot;myapp.orders&quot;,                 # 订单模块
    &quot;myapp.products&quot;,               # 产品模块
]

# 中间件配置 (按执行顺序)
MIDDLEWARE = [
    &quot;unfazed.middleware.internal.common.CommonMiddleware&quot;,       # 通用中间件
    &quot;unfazed.middleware.internal.cors.CORSMiddleware&quot;,          # 跨域处理
    &quot;unfazed.middleware.internal.trustedhost.TrustedHostMiddleware&quot;, # 主机验证
    &quot;unfazed.middleware.internal.gzip.GZipMiddleware&quot;,          # 压缩响应
    &quot;unfazed.contrib.session.middleware.SessionMiddleware&quot;,     # 会话中间件
    &quot;myapp.middleware.AuthMiddleware&quot;,                          # 自定义认证
]
</code></pre>
<h4 id="_13">数据库配置</h4>
<pre><code class="language-python">DATABASE = {
    &quot;CONNECTIONS&quot;: {
        # 主数据库
        &quot;default&quot;: {
            &quot;ENGINE&quot;: &quot;tortoise.backends.asyncpg&quot;,  # PostgreSQL
            &quot;CREDENTIALS&quot;: {
                &quot;host&quot;: &quot;localhost&quot;,
                &quot;port&quot;: 5432,
                &quot;user&quot;: &quot;myapp&quot;,
                &quot;password&quot;: &quot;secret&quot;,
                &quot;database&quot;: &quot;myapp_db&quot;,
                &quot;minsize&quot;: 1,
                &quot;maxsize&quot;: 20,
                &quot;command_timeout&quot;: 60,
                &quot;server_settings&quot;: {
                    &quot;application_name&quot;: &quot;myapp&quot;,
                }
            }
        },

        # 只读数据库
        &quot;readonly&quot;: {
            &quot;ENGINE&quot;: &quot;tortoise.backends.asyncpg&quot;,
            &quot;CREDENTIALS&quot;: {
                &quot;host&quot;: &quot;readonly.example.com&quot;,
                &quot;port&quot;: 5432,
                &quot;user&quot;: &quot;readonly_user&quot;,
                &quot;password&quot;: &quot;readonly_pass&quot;,
                &quot;database&quot;: &quot;myapp_db&quot;,
                &quot;minsize&quot;: 1,
                &quot;maxsize&quot;: 10,
            }
        },

        # 缓存数据库
        &quot;cache&quot;: {
            &quot;ENGINE&quot;: &quot;tortoise.backends.sqlite&quot;,
            &quot;CREDENTIALS&quot;: {
                &quot;file_path&quot;: &quot;cache.db&quot;,
                &quot;journal_mode&quot;: &quot;WAL&quot;,
                &quot;synchronous&quot;: &quot;NORMAL&quot;,
            }
        }
    },

    &quot;APPS&quot;: {
        &quot;models&quot;: {
            &quot;models&quot;: [
                &quot;myapp.users.models&quot;,
                &quot;myapp.orders.models&quot;,
                &quot;unfazed.contrib.auth.models&quot;,
            ],
            &quot;default_connection&quot;: &quot;default&quot;,
        },
        &quot;cache_models&quot;: {
            &quot;models&quot;: [&quot;myapp.cache.models&quot;],
            &quot;default_connection&quot;: &quot;cache&quot;,
        }
    },

    &quot;USE_TZ&quot;: True,
    &quot;TIMEZONE&quot;: &quot;Asia/Shanghai&quot;
}
</code></pre>
<h4 id="_14">缓存配置</h4>
<pre><code class="language-python">CACHE = {
    # 本地内存缓存
    &quot;default&quot;: {
        &quot;BACKEND&quot;: &quot;unfazed.cache.backends.locmem.LocMemCache&quot;,
        &quot;OPTIONS&quot;: {
            &quot;MAX_ENTRIES&quot;: 1000,    # 最大缓存条目数
            &quot;TIMEOUT&quot;: 300,         # 默认超时时间(秒)
            &quot;PREFIX&quot;: &quot;myapp:&quot;,     # 缓存键前缀
            &quot;VERSION&quot;: 1,           # 缓存版本
        }
    },

    # Redis 缓存
    &quot;redis&quot;: {
        &quot;BACKEND&quot;: &quot;unfazed.cache.backends.redis.defaultclient.DefaultBackend&quot;,
        &quot;LOCATION&quot;: &quot;redis://localhost:6379/0&quot;,
        &quot;OPTIONS&quot;: {
            &quot;max_connections&quot;: 100,
            &quot;decode_responses&quot;: True,
            &quot;retry_on_timeout&quot;: True,
            &quot;retry_on_error&quot;: [&quot;ConnectionError&quot;, &quot;TimeoutError&quot;],
            &quot;health_check_interval&quot;: 30,
            &quot;socket_timeout&quot;: 5,
            &quot;socket_connect_timeout&quot;: 5,
        }
    },

    # Redis 集群
    &quot;redis_cluster&quot;: {
        &quot;BACKEND&quot;: &quot;unfazed.cache.backends.redis.clusterclient.ClusterBackend&quot;,
        &quot;LOCATION&quot;: [
            &quot;redis://node1.example.com:6379&quot;,
            &quot;redis://node2.example.com:6379&quot;,
            &quot;redis://node3.example.com:6379&quot;,
        ],
        &quot;OPTIONS&quot;: {
            &quot;max_connections_per_node&quot;: 50,
            &quot;skip_full_coverage_check&quot;: True,
            &quot;decode_responses&quot;: True,
        }
    }
}
</code></pre>
<h2 id="_15">自定义配置</h2>
<h3 id="_16">应用级配置</h3>
<pre><code class="language-python"># myapp/settings.py
from typing import List, Optional
from pydantic import BaseModel, Field, validator
from unfazed.conf import register_settings

@register_settings(&quot;EMAIL_SETTINGS&quot;)
class EmailSettings(BaseModel):
    smtp_host: str = Field(..., description=&quot;SMTP 服务器地址&quot;)
    smtp_port: int = Field(default=587, ge=1, le=65535, description=&quot;SMTP 端口&quot;)
    username: str = Field(..., description=&quot;SMTP 用户名&quot;)
    password: str = Field(..., description=&quot;SMTP 密码&quot;)
    use_tls: bool = Field(default=True, description=&quot;是否使用 TLS&quot;)
    from_email: str = Field(..., description=&quot;发件人邮箱&quot;)

    @validator('smtp_host')
    def validate_smtp_host(cls, v):
        if not v.strip():
            raise ValueError('SMTP 主机地址不能为空')
        return v.strip()

@register_settings(&quot;PAYMENT_SETTINGS&quot;)
class PaymentSettings(BaseModel):
    provider: str = Field(..., description=&quot;支付提供商&quot;)
    api_key: str = Field(..., description=&quot;API 密钥&quot;)
    secret_key: str = Field(..., description=&quot;密钥&quot;)
    webhook_url: str = Field(..., description=&quot;回调 URL&quot;)
    test_mode: bool = Field(default=True, description=&quot;测试模式&quot;)
    supported_currencies: List[str] = Field(
        default=[&quot;CNY&quot;, &quot;USD&quot;], 
        description=&quot;支持的货币&quot;
    )

    @validator('api_key', 'secret_key')
    def validate_keys(cls, v):
        if len(v) &lt; 32:
            raise ValueError('密钥长度不能少于32位')
        return v

# settings.py
EMAIL_SETTINGS = {
    &quot;smtp_host&quot;: &quot;smtp.example.com&quot;,
    &quot;smtp_port&quot;: 587,
    &quot;username&quot;: &quot;noreply@example.com&quot;,
    &quot;password&quot;: &quot;your_password&quot;,
    &quot;use_tls&quot;: True,
    &quot;from_email&quot;: &quot;noreply@example.com&quot;
}

PAYMENT_SETTINGS = {
    &quot;provider&quot;: &quot;alipay&quot;,
    &quot;api_key&quot;: &quot;your_very_long_api_key_here_32chars&quot;,
    &quot;secret_key&quot;: &quot;your_very_long_secret_key_here_32chars&quot;,
    &quot;webhook_url&quot;: &quot;https://api.example.com/payment/webhook&quot;,
    &quot;test_mode&quot;: False,
    &quot;supported_currencies&quot;: [&quot;CNY&quot;, &quot;USD&quot;, &quot;EUR&quot;]
}
</code></pre>
<h3 id="_17">环境相关配置</h3>
<pre><code class="language-python"># config/settings.py
import os
from typing import Dict, Any

# 环境变量读取
def get_env(key: str, default: Any = None, cast_type: type = str):
    &quot;&quot;&quot;从环境变量获取配置&quot;&quot;&quot;
    value = os.environ.get(key, default)
    if value is None:
        return None

    if cast_type == bool:
        return value.lower() in ('true', '1', 'yes', 'on')
    elif cast_type == list:
        return [item.strip() for item in value.split(',') if item.strip()]

    return cast_type(value)

# 基础配置
UNFAZED_SETTINGS = {
    &quot;DEBUG&quot;: get_env(&quot;DEBUG&quot;, True, bool),
    &quot;PROJECT_NAME&quot;: get_env(&quot;PROJECT_NAME&quot;, &quot;MyApp&quot;),
    &quot;VERSION&quot;: get_env(&quot;VERSION&quot;, &quot;1.0.0&quot;),

    # 数据库配置
    &quot;DATABASE&quot;: {
        &quot;CONNECTIONS&quot;: {
            &quot;default&quot;: {
                &quot;ENGINE&quot;: &quot;tortoise.backends.asyncpg&quot;,
                &quot;CREDENTIALS&quot;: {
                    &quot;host&quot;: get_env(&quot;DB_HOST&quot;, &quot;localhost&quot;),
                    &quot;port&quot;: get_env(&quot;DB_PORT&quot;, 5432, int),
                    &quot;user&quot;: get_env(&quot;DB_USER&quot;, &quot;app&quot;),
                    &quot;password&quot;: get_env(&quot;DB_PASSWORD&quot;, &quot;password&quot;),
                    &quot;database&quot;: get_env(&quot;DB_NAME&quot;, &quot;app&quot;),
                    &quot;minsize&quot;: get_env(&quot;DB_MIN_SIZE&quot;, 1, int),
                    &quot;maxsize&quot;: get_env(&quot;DB_MAX_SIZE&quot;, 10, int),
                }
            }
        }
    },

    # Redis 配置
    &quot;CACHE&quot;: {
        &quot;redis&quot;: {
            &quot;BACKEND&quot;: &quot;unfazed.cache.backends.redis.defaultclient.DefaultBackend&quot;,
            &quot;LOCATION&quot;: get_env(&quot;REDIS_URL&quot;, &quot;redis://localhost:6379/0&quot;),
            &quot;OPTIONS&quot;: {
                &quot;max_connections&quot;: get_env(&quot;REDIS_MAX_CONN&quot;, 100, int),
                &quot;decode_responses&quot;: True,
            }
        }
    },

    # 安全配置
    &quot;CORS&quot;: {
        &quot;allow_origins&quot;: get_env(&quot;CORS_ORIGINS&quot;, [&quot;*&quot;], list),
        &quot;allow_credentials&quot;: get_env(&quot;CORS_CREDENTIALS&quot;, True, bool),
    },

    &quot;TRUSTED_HOST&quot;: {
        &quot;allowed_hosts&quot;: get_env(&quot;ALLOWED_HOSTS&quot;, [&quot;*&quot;], list),
    }
}

# 生产环境特殊配置
if not get_env(&quot;DEBUG&quot;, True, bool):
    UNFAZED_SETTINGS.update({
        &quot;OPENAPI&quot;: {
            &quot;allow_public&quot;: False,  # 生产环境关闭 OpenAPI 公开访问
        }
    })
</code></pre>
<p>通过 Unfazed 的配置系统，您可以构建出类型安全、结构清晰、易于维护的应用配置。该系统提供了从简单配置到复杂企业级配置管理的完整解决方案，确保应用在各种环境下都能正确运行。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>